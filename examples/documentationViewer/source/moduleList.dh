<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Module List - Crate.d</title>

        <!-- Bootstrap compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">

		<link rel="stylesheet" href="/styles/style.css">

    </head>
    <body>

    <?
    	import std.conv;
    	import std.string;

		string getComponents(string[string] list, string name) {
			string components;

			bool[string] randeredSublists;

			foreach(string key, string val; list) {
				
				if(key.length > name.length && key[0..name.length] == name) {
					string newKey = key[name.length+1..$];
					auto dotIndex = newKey.indexOf(".");

					if(dotIndex != -1) {
						string subkey = newKey[0..dotIndex];

						if(subkey !in randeredSublists) {
							randeredSublists[subkey] = true;
							components ~= `<li><a href="#">` ~ subkey ~ `</a> `~ getComponents(list, name ~ "." ~ subkey) ~ `</li>`;
						}
					} else {
						components ~= `<li><a href="/docs/` ~ key ~ `">` ~ newKey ~ `</a> `~ val ~ `</li>`;
					}
				}
			}


			return `<ul>` ~ components ~ `</ul>`;
		}


	?>

    <div class="row">
  		<div class="col">

	    	<ul class="breadcrumb">
			  <li><a href="#">Crate.d</a></li>
			</ul>
				
			<h1>Crate.d structure</h1>
	       
			<ul class="summary">
				<li>
					<a href="">Introduction</a>
				</li>
				<li>
					<a href="">Models</a>
					<?
						writeln(getComponents(data, "model").to!string);
					?>
				</li>
				<li>
					<a href="">Views</a>
					<?
						writeln(getComponents(data, "view").to!string);
					?>
				</li>
				<li>
					<a href="">Controllers</a>
					<?
						writeln(getComponents(data, "controller").to!string);
					?>
				</li>
			</ul>


		    </div>
		</div>
    </body>
</html>
 

